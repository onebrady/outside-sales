"use client";
import React from "react";
import * as _Builtin from "./_Builtin";
import * as _utils from "./utils";
import _styles from "./RecentlyViewed.module.css";

export function RecentlyViewed({ as: _Component = _Builtin.Section }) {
  return (
    <_Component
      className={_utils.cx(_styles, "recently-viewed")}
      grid={{
        type: "section",
      }}
      tag="section"
      id="recntviews"
    >
      <_Builtin.BlockContainer
        className={_utils.cx(_styles, "container-large")}
        grid={{
          type: "container",
        }}
        tag="div"
      >
        <_Builtin.Block
          className={_utils.cx(_styles, "div-block-69")}
          tag="div"
        >
          <_Builtin.Heading
            className={_utils.cx(_styles, "heading-15")}
            tag="h3"
          >
            {"Recently Viewed Inventory"}
          </_Builtin.Heading>
          <_Builtin.Link
            className={_utils.cx(_styles, "button-secondary")}
            button={true}
            id="clear-recent"
            block=""
            options={{
              href: "#",
            }}
          >
            {"clear recent"}
          </_Builtin.Link>
        </_Builtin.Block>
        <_Builtin.Block
          className={_utils.cx(_styles, "div-block-66")}
          tag="div"
          id="recentlyViewedSection"
        />
      </_Builtin.BlockContainer>
      <_Builtin.HtmlEmbed value="%3Cstyle%3E%0A.recently-heading%20%7B%0Apadding-top%3A6px%3B%0Apadding-bottom%3A6px%3B%0Atext-align%3Acenter%3B%0A%7D%0A%3C%2Fstyle%3E%0A%3Cscript%3E%0A%2F%2F%20Function%20to%20update%20the%20%22Previously%20Viewed%22%20items%20with%20name%20and%20image%0Afunction%20updateRecentlyViewed()%20%7B%0A%20%20%20%20const%20maxItems%20%3D%204%3B%20%20%2F%2F%20Limit%20to%204%20items%0A%20%20%20%20const%20currentURL%20%3D%20window.location.href%3B%0A%0A%20%20%20%20%2F%2F%20Get%20the%20text%20from%20%23inventory-name%20and%20src%20from%20%23main-image%0A%20%20%20%20const%20inventoryName%20%3D%20document.querySelector('%23inventory-name')%3F.textContent%3B%0A%20%20%20%20const%20mainImageSrc%20%3D%20document.querySelector('%23main-image')%3F.src%3B%0A%0A%20%20%20%20%2F%2F%20Validate%20that%20both%20name%20and%20image%20are%20present%20before%20proceeding%0A%20%20%20%20if%20(!inventoryName%20%7C%7C%20!mainImageSrc)%20%7B%0A%20%20%20%20%20%20%20%20console.warn(%22Entry%20not%20saved%3A%20Missing%20image%20or%20name.%22)%3B%0A%20%20%20%20%20%20%20%20return%3B%20%2F%2F%20Exit%20the%20function%20without%20saving%20to%20local%20storage%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Retrieve%20the%20%22recentlyViewed%22%20array%20from%20local%20storage%2C%20or%20create%20an%20empty%20one%0A%20%20%20%20let%20recentlyViewed%20%3D%20JSON.parse(localStorage.getItem('recentlyViewed'))%20%7C%7C%20%5B%5D%3B%0A%0A%20%20%20%20%2F%2F%20Create%20a%20new%20entry%20object%0A%20%20%20%20const%20newItem%20%3D%20%7B%20url%3A%20currentURL%2C%20name%3A%20inventoryName%2C%20image%3A%20mainImageSrc%20%7D%3B%0A%0A%20%20%20%20%2F%2F%20Check%20if%20the%20current%20URL%20is%20already%20in%20the%20list%20to%20avoid%20duplicates%0A%20%20%20%20if%20(!recentlyViewed.some(item%20%3D%3E%20item.url%20%3D%3D%3D%20currentURL))%20%7B%0A%20%20%20%20%20%20%20%20recentlyViewed.unshift(newItem)%3B%20%2F%2F%20Add%20to%20the%20beginning%20of%20the%20array%0A%0A%20%20%20%20%20%20%20%20%2F%2F%20Limit%20to%20a%20maximum%20number%20of%20items%20by%20slicing%20the%20array%20if%20it%20exceeds%20maxItems%0A%20%20%20%20%20%20%20%20recentlyViewed%20%3D%20recentlyViewed.slice(0%2C%20maxItems)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Save%20the%20updated%20array%20back%20to%20local%20storage%0A%20%20%20%20localStorage.setItem('recentlyViewed'%2C%20JSON.stringify(recentlyViewed))%3B%0A%7D%0A%0A%2F%2F%20Function%20to%20display%20the%20%22Previously%20Viewed%22%20items%20in%20a%20specific%20section%0Afunction%20displayRecentlyViewed()%20%7B%0A%20%20%20%20const%20recentlyViewed%20%3D%20JSON.parse(localStorage.getItem('recentlyViewed'))%20%7C%7C%20%5B%5D%3B%0A%20%20%20%20const%20viewedSection%20%3D%20document.querySelector('%23recentlyViewedSection')%3B%0A%20%20%20%20const%20parentDiv%20%3D%20document.querySelector('%23recntviews')%3B%0A%0A%20%20%20%20%2F%2F%20Limit%20to%20rendering%20only%20maxItems%20number%20of%20entries%0A%20%20%20%20const%20itemsToDisplay%20%3D%20recentlyViewed.slice(0%2C%204)%3B%0A%0A%20%20%20%20if%20(itemsToDisplay.length%20%26%26%20viewedSection)%20%7B%0A%20%20%20%20%20%20%20%20viewedSection.style.display%20%3D%20'grid'%3B%20%2F%2F%20Show%20the%20section%20if%20there%20are%20items%0A%20%20%20%20%20%20%20%20parentDiv.style.display%20%3D%20'block'%3B%20%2F%2F%20Show%20the%20parent%20div%0A%0A%20%20%20%20%20%20%20%20viewedSection.innerHTML%20%3D%20''%3B%20%2F%2F%20Clear%20the%20section%20before%20adding%20new%20items%0A%0A%20%20%20%20%20%20%20%20itemsToDisplay.forEach(item%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Create%20the%20main%20div%20block%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20mainDiv%20%3D%20document.createElement('div')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20mainDiv.classList.add('div-block-67')%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Create%20the%20inner%20image%20div%20and%20img%20element%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20imageDiv%20%3D%20document.createElement('div')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20imageElement%20%3D%20document.createElement('img')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageElement.src%20%3D%20item.image%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageElement.alt%20%3D%20item.name%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageElement.classList.add('image-16'%2C%20'recently-image')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20imageDiv.appendChild(imageElement)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Create%20the%20text%20and%20link%20div%20block%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20textDiv%20%3D%20document.createElement('div')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20textDiv.classList.add('div-block-68')%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Create%20the%20heading%20for%20the%20name%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20nameHeading%20%3D%20document.createElement('p')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20nameHeading.textContent%20%3D%20item.name%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20nameHeading.classList.add('heading-14'%2C%20'recently-heading')%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Create%20the%20link%20element%0A%20%20%20%20%20%20%20%20%20%20%20%20const%20linkElement%20%3D%20document.createElement('a')%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20linkElement.href%20%3D%20item.url%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20linkElement.textContent%20%3D%20'View%20now'%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20linkElement.classList.add('button-yellow'%2C%20'recently-link'%2C%20'w-button')%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Append%20heading%20and%20link%20to%20the%20text%20div%0A%20%20%20%20%20%20%20%20%20%20%20%20textDiv.appendChild(nameHeading)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20textDiv.appendChild(linkElement)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Append%20imageDiv%20and%20textDiv%20to%20the%20main%20div%20block%0A%20%20%20%20%20%20%20%20%20%20%20%20mainDiv.appendChild(imageDiv)%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20mainDiv.appendChild(textDiv)%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Append%20the%20complete%20structure%20to%20the%20viewed%20section%0A%20%20%20%20%20%20%20%20%20%20%20%20viewedSection.appendChild(mainDiv)%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Hide%20the%20parent%20div%20if%20there%20are%20no%20recently%20viewed%20items%0A%20%20%20%20%20%20%20%20parentDiv.style.display%20%3D%20'none'%3B%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Function%20to%20clear%20the%20recently%20viewed%20history%0Afunction%20clearRecentlyViewedHistory()%20%7B%0A%20%20%20%20%2F%2F%20Clear%20the%20%22recentlyViewed%22%20array%20from%20local%20storage%0A%20%20%20%20localStorage.removeItem('recentlyViewed')%3B%0A%0A%20%20%20%20%2F%2F%20Hide%20the%20%22Recently%20Viewed%22%20section%20and%20clear%20its%20contents%0A%20%20%20%20const%20viewedSection%20%3D%20document.querySelector('%23recentlyViewedSection')%3B%0A%20%20%20%20const%20parentDiv%20%3D%20document.querySelector('%23recntviews')%3B%0A%20%20%20%20if%20(viewedSection)%20%7B%0A%20%20%20%20%20%20%20%20viewedSection.innerHTML%20%3D%20''%3B%20%2F%2F%20Remove%20all%20items%0A%20%20%20%20%20%20%20%20viewedSection.style.display%20%3D%20'none'%3B%20%2F%2F%20Hide%20the%20section%0A%20%20%20%20%7D%0A%20%20%20%20if%20(parentDiv)%20%7B%0A%20%20%20%20%20%20%20%20parentDiv.style.display%20%3D%20'none'%3B%20%2F%2F%20Hide%20the%20parent%20div%0A%20%20%20%20%7D%0A%7D%0A%0A%2F%2F%20Event%20listener%20for%20the%20clear%20button%20and%20page%20show%20events%0Adocument.addEventListener('DOMContentLoaded'%2C%20function()%20%7B%0A%20%20%20%20const%20clearHistoryButton%20%3D%20document.querySelector('%23clear-recent')%3B%0A%20%20%20%20if%20(clearHistoryButton)%20%7B%0A%20%20%20%20%20%20%20%20clearHistoryButton.addEventListener('click'%2C%20clearRecentlyViewedHistory)%3B%0A%20%20%20%20%7D%0A%20%20%20%20displayRecentlyViewed()%3B%20%2F%2F%20Initial%20call%20on%20page%20load%0A%7D)%3B%0A%0A%2F%2F%20Listen%20for%20the%20pageshow%20event%20to%20handle%20back%20navigation%0Awindow.addEventListener('pageshow'%2C%20function()%20%7B%0A%20%20%20%20displayRecentlyViewed()%3B%20%2F%2F%20Call%20display%20function%20when%20navigating%20back%0A%7D)%3B%0A%0A%2F%2F%20Call%20update%20function%20on%20page%20load%20to%20add%20the%20current%20page%0AupdateRecentlyViewed()%3B%0A%0A%3C%2Fscript%3E%0A%3Cscript%3E%0A%20%20document.addEventListener(%22DOMContentLoaded%22%2C%20function()%20%7B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20---%20Event%20Delegation%20for%20Recently%20Viewed%20Links%20---%0A%20%20%20%20%2F%2F%20Instead%20of%20grabbing%20all%20.recently-link%20%3Ca%3E%20tags%20at%20DOM%20load%2C%0A%20%20%20%20%2F%2F%20listen%20for%20clicks%20on%20the%20document%20(or%20a%20parent%20container)%2C%0A%20%20%20%20%2F%2F%20and%20check%20if%20the%20target%20matches%20the%20selector.%0A%20%20%20%20document.addEventListener('click'%2C%20function(event)%20%7B%0A%20%20%20%20%20%20if%20(event.target.matches('%23recentlyViewedSection%20a.recently-link'))%20%7B%0A%20%20%20%20%20%20%20%20window.dataLayer%20%3D%20window.dataLayer%20%7C%7C%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20dataLayer.push(%7B%0A%20%20%20%20%20%20%20%20%20%20event%3A%20'view%20recent'%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Optional%3A%20include%20additional%20info%20(e.g.%2C%20product%20name%2FID)%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20productName%3A%20event.target.previousElementSibling.textContent%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%0A%20%20%20%20%2F%2F%20---%20Clear%20Recents%20Button%20---%0A%20%20%20%20const%20clearRecentsButton%20%3D%20document.querySelector('%23clear-recent')%3B%0A%20%20%20%20if%20(clearRecentsButton)%20%7B%0A%20%20%20%20%20%20clearRecentsButton.addEventListener('click'%2C%20function()%20%7B%0A%20%20%20%20%20%20%20%20window.dataLayer%20%3D%20window.dataLayer%20%7C%7C%20%5B%5D%3B%0A%20%20%20%20%20%20%20%20dataLayer.push(%7B%0A%20%20%20%20%20%20%20%20%20%20event%3A%20'clear%20recent'%0A%20%20%20%20%20%20%20%20%20%20%2F%2F%20Optional%3A%20include%20additional%20info%20if%20needed%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%0A%20%20%7D)%3B%0A%3C%2Fscript%3E" />
    </_Component>
  );
}
